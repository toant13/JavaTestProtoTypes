
package mil.ssc.pac.JerseyTest;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import javax.ws.rs.Consumes;
import javax.ws.rs.GET;
import javax.ws.rs.POST;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import org.glassfish.jersey.media.multipart.FormDataContentDisposition;
import org.glassfish.jersey.media.multipart.FormDataParam;




/** Example resource class hosted at the URI path "/myresource"
 */
@Path("/myresource")
public class MyResource {
    
    /** Method processing HTTP GET requests, producing "text/plain" MIME media
     * type.
     * @return String that will be send back as a response of type "text/plain".
     */
    @GET 
    @Produces("text/plain")
    public String getIt() {
        return "Hi therdfasdfse!";
    }
    
    @POST
    @Path("/save")
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    @Produces("text/plain")
    public String upload(@FormDataParam("file") InputStream is, @FormDataParam("file") FormDataContentDisposition header) throws IOException
    {
    	OutputStream out = new FileOutputStream(new File("/Users/toantran/Documents/Java_development/workspace/JerseyTest/src/main/resources/output/output.xml"));
    	
    	int read = 0;
    	byte[] bytes = new byte[1024];
    	
    	while((read = is.read(bytes)) != -1){
    		out.write(bytes, 0, read);
    	}
    	out.close();
    	return "successful";
    }
    
    
    
}
